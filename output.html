<link rel="stylesheet" href="style.css">

<style>
    @import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap');
    @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap");
    @import url('https://fonts.googleapis.com/css2?family=Geo:ital@0;1&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

    #leaderboard {
        background-color: rgba(255, 255, 255, 0.5);
    }

    #leaderboard > * {
        font-family: "Orbitron";
        font-weight: 600;
        font-style: normal;
    }

    .record-time {
        font-family: "Roboto", monospace;
    }
</style>

<div id="container">
    <h1>Tower of Hanoi</h1>
    <div id="leaderboard">Connecting to server ...</div>
</div>

<script src="common.js"></script>
<script>
    var leaderboard = [];
    
    const wsUri = "wss://large-ape-25.deno.dev";
    const websocket = new WebSocket(wsUri);

    websocket.onopen = (e) => {
        console.log("CONNECTED");
    };

    websocket.onclose = (e) => {
        console.log("DISCONNECTED");
    };

    websocket.onmessage = (e) => {
        console.log(`RECEIVED: ${e.data}`);
        if (e.data.startsWith("@")) return;
        leaderboard = JSON.parse(e.data);
        updateLeaderboard();
    };

    websocket.onerror = (e) => {
        console.log(`ERROR: ${e.data}`);
    };
</script>
